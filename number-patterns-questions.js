/**
 * Number Patterns - 30 levels, 6 questions per level (උපරිම)
 * Levels 21-30: තව අමාරු (cubes, factorial, primes, complex)
 * Format: { seq: [n1, n2, n3, n4], mIdx: 0|1|2|3 }
 */
const MAX_LEVEL = 30;
const QUESTIONS_PER_LEVEL = 6;
const RETRY_QUESTIONS_COUNT = 5;

const _q = (seq, mIdx) => ({ seq, mIdx });

/* ========== Level 1 ========== */
const LEVEL_1 = [
    _q([2, 5, 8, 11], 0), _q([2, 5, 8, 11], 1), _q([2, 5, 8, 11], 2), _q([2, 5, 8, 11], 3),
    _q([3, 6, 9, 12], 0), _q([3, 6, 9, 12], 1), _q([3, 6, 9, 12], 3),
    _q([1, 4, 7, 10], 0), _q([1, 4, 7, 10], 2), _q([4, 7, 10, 13], 1),
];

/* ========== Level 2 ========== */
const LEVEL_2 = [
    _q([4, 7, 10, 13], 0), _q([4, 7, 10, 13], 2), _q([4, 7, 10, 13], 3),
    _q([2, 5, 8, 11], 1), _q([3, 6, 9, 12], 2), _q([1, 4, 7, 10], 1), _q([1, 4, 7, 10], 3),
    _q([5, 8, 11, 14], 1), _q([6, 9, 12, 15], 0), _q([2, 6, 10, 14], 0),
];

/* ========== Level 3 ========== */
const LEVEL_3 = [
    _q([20, 17, 14, 11], 0), _q([20, 17, 14, 11], 1), _q([20, 17, 14, 11], 2), _q([20, 17, 14, 11], 3),
    _q([25, 22, 19, 16], 0), _q([25, 22, 19, 16], 1), _q([18, 15, 12, 9], 0),
    _q([2, 7, 12, 17], 1), _q([5, 10, 15, 20], 0), _q([24, 20, 16, 12], 3),
];

/* ========== Level 4 ========== */
const LEVEL_4 = [
    _q([22, 18, 14, 10], 0), _q([28, 24, 20, 16], 3), _q([20, 17, 14, 11], 2),
    _q([3, 6, 9, 12], 0), _q([4, 7, 10, 13], 1), _q([5, 8, 11, 14], 2),
    _q([2, 6, 10, 14], 2), _q([3, 7, 11, 15], 0), _q([4, 8, 12, 16], 0),
    _q([3, 6, 12, 24], 0), _q([3, 6, 12, 24], 1),
];

/* ========== Level 5 ========== */
const LEVEL_5 = [
    _q([2, 5, 8, 11], 0), _q([3, 6, 9, 12], 3), _q([1, 4, 7, 10], 3),
    _q([4, 7, 10, 13], 2), _q([5, 8, 11, 14], 3), _q([6, 9, 12, 15], 2),
    _q([20, 17, 14, 11], 1), _q([25, 22, 19, 16], 2), _q([18, 15, 12, 9], 1),
    _q([1, 2, 4, 8], 3), _q([2, 4, 8, 16], 0),
];

/* ========== Level 6 ========== */
const LEVEL_6 = [
    _q([2, 5, 8, 11], 2), _q([3, 6, 9, 12], 1), _q([4, 7, 10, 13], 0),
    _q([2, 6, 10, 14], 1), _q([3, 7, 11, 15], 2), _q([4, 8, 12, 16], 1),
    _q([20, 17, 14, 11], 0), _q([25, 22, 19, 16], 3), _q([30, 26, 22, 18], 1),
    _q([1, 2, 4, 8], 0), _q([2, 4, 8, 16], 3),
];

/* ========== Level 7 ========== */
const LEVEL_7 = [
    _q([1, 4, 7, 10], 0), _q([5, 8, 11, 14], 1), _q([6, 9, 12, 15], 0),
    _q([2, 6, 10, 14], 3), _q([4, 8, 12, 16], 2), _q([7, 10, 13, 16], 1),
    _q([18, 15, 12, 9], 2), _q([24, 20, 16, 12], 1), _q([28, 24, 20, 16], 0),
    _q([1, 2, 4, 8], 1), _q([2, 4, 8, 16], 1),
];

/* ========== Level 8 ========== */
const LEVEL_8 = [
    _q([4, 7, 10, 13], 3), _q([5, 8, 11, 14], 0), _q([6, 9, 12, 15], 1),
    _q([2, 7, 12, 17], 2), _q([5, 10, 15, 20], 2), _q([25, 22, 19, 16], 1),
    _q([16, 13, 10, 7], 2), _q([22, 18, 14, 10], 2), _q([30, 26, 22, 18], 0),
    _q([2, 4, 8, 16], 2), _q([3, 6, 12, 24], 0),
];

/* ========== Level 9 ========== */
const LEVEL_9 = [
    _q([2, 5, 8, 11], 3), _q([3, 6, 9, 12], 0), _q([1, 4, 7, 10], 2),
    _q([4, 7, 10, 13], 2), _q([5, 8, 11, 14], 2), _q([2, 6, 10, 14], 0),
    _q([20, 17, 14, 11], 2), _q([18, 15, 12, 9], 3), _q([24, 20, 16, 12], 2),
    _q([1, 2, 4, 8], 2), _q([2, 4, 8, 16], 0),
];

/* ========== Level 10 ========== */
const LEVEL_10 = [
    _q([2, 5, 8, 11], 0), _q([3, 6, 9, 12], 1), _q([4, 7, 10, 13], 1),
    _q([5, 8, 11, 14], 3), _q([6, 9, 12, 15], 3), _q([2, 6, 10, 14], 1),
    _q([20, 17, 14, 11], 1), _q([25, 22, 19, 16], 0), _q([30, 26, 22, 18], 2),
    _q([1, 2, 4, 8], 3), _q([2, 4, 8, 16], 1),
];

/* ========== Level 11 (අමාරු - ×3, squares) ========== */
const LEVEL_11 = [
    _q([2, 6, 18, 54], 0), _q([2, 6, 18, 54], 1), _q([2, 6, 18, 54], 2), _q([2, 6, 18, 54], 3),
    _q([3, 9, 27, 81], 0), _q([3, 9, 27, 81], 2), _q([1, 4, 9, 16], 0), _q([1, 4, 9, 16], 1),
    _q([1, 4, 9, 16], 2), _q([1, 4, 9, 16], 3),
];

/* ========== Level 12 ========== */
const LEVEL_12 = [
    _q([1, 4, 9, 16], 1), _q([2, 6, 18, 54], 3), _q([3, 9, 27, 81], 1), _q([3, 9, 27, 81], 3),
    _q([1, 3, 6, 10], 1), _q([1, 3, 6, 10], 3), _q([2, 3, 5, 8], 0), _q([2, 3, 5, 8], 2),
    _q([2, 4, 7, 11], 0), _q([2, 4, 7, 11], 2),
];

/* ========== Level 13 ========== */
const LEVEL_13 = [
    _q([1, 4, 16, 64], 0), _q([1, 4, 16, 64], 2), _q([2, 4, 7, 11], 1), _q([2, 4, 7, 11], 3),
    _q([40, 35, 30, 25], 1), _q([40, 35, 30, 25], 3), _q([3, 5, 8, 13], 0), _q([3, 5, 8, 13], 2),
    _q([4, 12, 36, 108], 1), _q([1, 5, 14, 30], 2),
];

/* ========== Level 14 ========== */
const LEVEL_14 = [
    _q([3, 5, 8, 13], 1), _q([3, 5, 8, 13], 3), _q([4, 12, 36, 108], 0), _q([4, 12, 36, 108], 2),
    _q([1, 5, 14, 30], 0), _q([1, 5, 14, 30], 3), _q([50, 44, 38, 32], 1), _q([6, 12, 24, 48], 0),
    _q([2, 5, 11, 23], 0), _q([2, 5, 11, 23], 2),
];

/* ========== Level 15 ========== */
const LEVEL_15 = [
    _q([2, 6, 18, 54], 1), _q([3, 9, 27, 81], 2), _q([1, 4, 9, 16], 2), _q([1, 3, 6, 10], 2),
    _q([2, 4, 7, 11], 0), _q([40, 35, 30, 25], 2), _q([3, 5, 8, 13], 2), _q([4, 12, 36, 108], 3),
    _q([6, 12, 24, 48], 1), _q([50, 44, 38, 32], 2),
];

/* ========== Level 16 ========== */
const LEVEL_16 = [
    _q([5, 15, 45, 135], 0), _q([5, 15, 45, 135], 1), _q([4, 9, 16, 25], 0), _q([4, 9, 16, 25], 2),
    _q([1, 2, 4, 7], 0), _q([1, 2, 4, 7], 3), _q([70, 62, 54, 46], 1), _q([8, 16, 32, 64], 2),
    _q([4, 7, 12, 19], 1), _q([3, 6, 12, 24], 0),
];

/* ========== Level 17 ========== */
const LEVEL_17 = [
    _q([4, 9, 16, 25], 1), _q([4, 9, 16, 25], 3), _q([5, 15, 45, 135], 2), _q([5, 15, 45, 135], 3),
    _q([1, 2, 4, 7], 1), _q([1, 2, 4, 7], 2), _q([70, 62, 54, 46], 0), _q([8, 16, 32, 64], 0),
    _q([4, 7, 12, 19], 0), _q([4, 7, 12, 19], 2),
];

/* ========== Level 18 ========== */
const LEVEL_18 = [
    _q([1, 2, 4, 7], 2), _q([4, 9, 16, 25], 0), _q([5, 15, 45, 135], 0), _q([70, 62, 54, 46], 2),
    _q([8, 16, 32, 64], 1), _q([8, 16, 32, 64], 3), _q([4, 7, 12, 19], 3), _q([2, 5, 11, 23], 1),
    _q([6, 18, 54, 162], 0), _q([6, 18, 54, 162], 3),
];

/* ========== Level 19 ========== */
const LEVEL_19 = [
    _q([5, 15, 45, 135], 1), _q([4, 9, 16, 25], 2), _q([70, 62, 54, 46], 3), _q([8, 16, 32, 64], 2),
    _q([4, 7, 12, 19], 1), _q([2, 5, 11, 23], 3), _q([6, 18, 54, 162], 2), _q([55, 48, 41, 34], 2),
    _q([1, 2, 4, 7], 0), _q([3, 6, 12, 24], 1),
];

/* ========== Level 20 ========== */
const LEVEL_20 = [
    _q([5, 15, 45, 135], 3), _q([4, 9, 16, 25], 1), _q([6, 18, 54, 162], 0), _q([8, 16, 32, 64], 3),
    _q([70, 62, 54, 46], 0), _q([4, 7, 12, 19], 2), _q([2, 5, 11, 23], 0), _q([55, 48, 41, 34], 1),
    _q([6, 18, 54, 162], 3), _q([1, 2, 4, 7], 2),
];

/* ========== Level 21 (අමාරු - cubes, 2^n-1) ========== */
const LEVEL_21 = [
    _q([1, 8, 27, 64], 0), _q([1, 8, 27, 64], 1), _q([1, 8, 27, 64], 2), _q([1, 8, 27, 64], 3),
    _q([1, 3, 7, 15], 0), _q([1, 3, 7, 15], 1), _q([1, 3, 7, 15], 2), _q([2, 6, 14, 30], 0),
    _q([2, 6, 14, 30], 2), _q([1, 5, 13, 29], 1),
];

/* ========== Level 22 ========== */
const LEVEL_22 = [
    _q([1, 3, 6, 10], 0), _q([1, 3, 6, 10], 1), _q([1, 3, 6, 10], 2), _q([2, 6, 12, 20], 0),
    _q([2, 6, 12, 20], 1), _q([2, 6, 12, 20], 2), _q([2, 3, 5, 8], 0), _q([3, 5, 8, 13], 1),
    _q([1, 8, 27, 64], 2), _q([1, 3, 7, 15], 3),
];

/* ========== Level 23 (primes, 4,9,25,49) ========== */
const LEVEL_23 = [
    _q([2, 3, 5, 7], 0), _q([2, 3, 5, 7], 1), _q([2, 3, 5, 7], 2), _q([2, 3, 5, 7], 3),
    _q([4, 9, 25, 49], 0), _q([4, 9, 25, 49], 1), _q([4, 9, 25, 49], 2), _q([11, 13, 17, 19], 0),
    _q([11, 13, 17, 19], 2), _q([1, 3, 6, 10], 3),
];

/* ========== Level 24 ========== */
const LEVEL_24 = [
    _q([3, 6, 11, 20], 0), _q([3, 6, 11, 20], 1), _q([3, 6, 11, 20], 2), _q([1, 4, 10, 22], 0),
    _q([1, 4, 10, 22], 1), _q([1, 4, 10, 22], 2), _q([5, 10, 20, 35], 0), _q([5, 10, 20, 35], 2),
    _q([4, 9, 25, 49], 3), _q([2, 6, 14, 30], 3),
];

/* ========== Level 25 ========== */
const LEVEL_25 = [
    _q([1, 2, 6, 24], 0), _q([1, 2, 6, 24], 1), _q([1, 2, 6, 24], 2), _q([1, 2, 6, 24], 3),
    _q([2, 5, 10, 17], 0), _q([2, 5, 10, 17], 1), _q([2, 5, 10, 17], 2), _q([1, 4, 9, 16], 0),
    _q([1, 4, 9, 16], 2), _q([3, 6, 11, 20], 3),
];

/* ========== Level 26 ========== */
const LEVEL_26 = [
    _q([1, 4, 9, 25], 0), _q([1, 4, 9, 25], 1), _q([1, 4, 9, 25], 2), _q([6, 12, 24, 48], 0),
    _q([6, 12, 24, 48], 1), _q([6, 12, 24, 48], 2), _q([1, 2, 6, 24], 1), _q([3, 9, 27, 81], 0),
    _q([2, 5, 10, 17], 3), _q([1, 4, 10, 22], 3),
];

/* ========== Level 27 ========== */
const LEVEL_27 = [
    _q([1, 5, 14, 30], 0), _q([1, 5, 14, 30], 1), _q([1, 5, 14, 30], 2), _q([1, 5, 14, 30], 3),
    _q([2, 4, 8, 16], 0), _q([2, 4, 8, 16], 2), _q([1, 8, 27, 64], 1), _q([4, 7, 12, 19], 0),
    _q([4, 7, 12, 19], 2), _q([5, 10, 20, 35], 3),
];

/* ========== Level 28 ========== */
const LEVEL_28 = [
    _q([2, 7, 15, 26], 0), _q([2, 7, 15, 26], 1), _q([2, 7, 15, 26], 2), _q([3, 7, 15, 31], 0),
    _q([3, 7, 15, 31], 1), _q([3, 7, 15, 31], 2), _q([1, 3, 7, 15], 0), _q([1, 2, 6, 24], 2),
    _q([4, 9, 25, 49], 2), _q([2, 6, 12, 20], 3),
];

/* ========== Level 29 ========== */
const LEVEL_29 = [
    _q([1, 4, 16, 64], 0), _q([1, 4, 16, 64], 1), _q([1, 4, 16, 64], 2), _q([1, 4, 16, 64], 3),
    _q([2, 7, 15, 26], 3), _q([3, 7, 15, 31], 3), _q([1, 3, 6, 10], 1), _q([2, 6, 12, 20], 0),
    _q([5, 15, 45, 135], 0), _q([1, 5, 14, 30], 2),
];

/* ========== Level 30 ========== */
const LEVEL_30 = [
    _q([1, 8, 27, 64], 0), _q([1, 2, 6, 24], 0), _q([2, 5, 10, 17], 1), _q([1, 5, 14, 30], 0),
    _q([4, 9, 25, 49], 1), _q([3, 6, 11, 20], 2), _q([1, 4, 16, 64], 2), _q([2, 7, 15, 26], 1),
    _q([1, 3, 7, 15], 2), _q([2, 6, 14, 30], 1),
];

/* ========== Retry Questions (5) ========== */
const RETRY_PATTERN_QUESTIONS = [
    _q([2, 5, 8, 11], 0),
    _q([3, 6, 9, 12], 1),
    _q([1, 2, 4, 8], 2),
    _q([20, 17, 14, 11], 3),
    _q([2, 4, 8, 16], 0),
];

/* ========== Cube Skins (මට්ටම් 5න් 5ට) ========== */
const CUBE_SKINS = [
    { border: '#e65100', line: '#ffcc80', accent: '#ff6d00', bg: '#fff3e0' },   /* L1-5:   Orange */
    { border: '#0277bd', line: '#81d4fa', accent: '#0288d1', bg: '#e1f5fe' },   /* L6-10:  Blue */
    { border: '#7b1fa2', line: '#ce93d8', accent: '#9c27b0', bg: '#f3e5f5' },   /* L11-15: Purple */
    { border: '#2e7d32', line: '#a5d6a7', accent: '#43a047', bg: '#e8f5e9' },   /* L16-20: Green */
    { border: '#c62828', line: '#ef9a9a', accent: '#d32f2f', bg: '#ffebee' },   /* L21-25: Red */
    { border: '#1565c0', line: '#90caf9', accent: '#1976d2', bg: '#e3f2fd' },   /* L26-30: Dark Blue */
];

function getSkinForLevel(level) {
    const idx = Math.min(Math.floor((level - 1) / 5), CUBE_SKINS.length - 1);
    return CUBE_SKINS[idx];
}

const NUMBER_PATTERN_QUESTIONS_BY_LEVEL = [
    LEVEL_1, LEVEL_2, LEVEL_3, LEVEL_4, LEVEL_5,
    LEVEL_6, LEVEL_7, LEVEL_8, LEVEL_9, LEVEL_10,
    LEVEL_11, LEVEL_12, LEVEL_13, LEVEL_14, LEVEL_15,
    LEVEL_16, LEVEL_17, LEVEL_18, LEVEL_19, LEVEL_20,
    LEVEL_21, LEVEL_22, LEVEL_23, LEVEL_24, LEVEL_25,
    LEVEL_26, LEVEL_27, LEVEL_28, LEVEL_29, LEVEL_30,
];
